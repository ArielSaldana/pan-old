"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),EventEmitter=function(){function e(t){_classCallCheck(this,e),this.callbacks={},this.callbacks.base={}}return _createClass(e,[{key:"on",value:function(e,t){var n=this;return"undefined"==typeof e||""===e?(console.warn("wrong names"),!1):"undefined"==typeof t?(console.warn("wrong callback"),!1):(e=this.resolve_names(e),e.forEach(function(e){e=n.resolve_name(e),n.callbacks[e.namespace]instanceof Object||(n.callbacks[e.namespace]={}),n.callbacks[e.namespace][e.value]instanceof Array||(n.callbacks[e.namespace][e.value]=[]),n.callbacks[e.namespace][e.value].push(t)}),this)}},{key:"off",value:function(e){var t=this;return"undefined"==typeof e||""===e?(console.warn("wrong name"),!1):(e=this.resolve_names(e),void e.forEach(function(e){if(e=t.resolve_name(e),"base"!==e.namespace&&""===e.value)delete t.callbacks[e.namespace];else if("base"===e.namespace)for(var n in t.callbacks)t.callbacks[n]instanceof Object&&t.callbacks[n][e.value]instanceof Array&&(delete t.callbacks[n][e.value],0===Object.keys(t.callbacks[n]).length&&delete t.callbacks[n]);else t.callbacks[e.namespace]instanceof Object&&t.callbacks[e.namespace][e.value]instanceof Array&&(delete t.callbacks[e.namespace][e.value],0===Object.keys(t.callbacks[e.namespace]).length&&delete t.callbacks[e.namespace])}))}},{key:"trigger",value:function(e,t){if("undefined"==typeof e||""===e)return console.warn("wrong name"),!1;var n,i;if(t instanceof Array||(t=[]),e=this.resolve_names(e),e=this.resolve_name(e[0]),"base"===e.namespace)for(var r in this.callbacks)this.callbacks[r]instanceof Object&&this.callbacks[r][e.value]instanceof Array&&this.callbacks[r][e.value].forEach(function(e){i=e.apply(this,t),"undefined"==typeof n&&(n=i)});else if(this.callbacks[e.namespace]instanceof Object){if(""===e.value)return console.warn("wrong name"),this;this.callbacks[e.namespace][e.value].forEach(function(e){i=e.apply(this,t),"undefined"==typeof n&&(n=i)})}return n}},{key:"trigga",value:function(e,t){return this.trigger(e,t)}},{key:"dispatch",value:function(e,t){return this.trigger(e,t)}},{key:"fire",value:function(e,t){return this.trigger(e,t)}},{key:"resolve_names",value:function(e){return e=e.replace(/[^a-zA-Z0-9 ,\/.]/g,""),e=e.replace(/[,\/]+/g," "),e=e.split(" ")}},{key:"resolve_name",value:function(e){var t={},n=e.split(".");return t.original=e,t.value=n[0],t.namespace="base",n.length>1&&""===n[1]&&(t.namespace=n[1]),t}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),detectorInstance=null,Detector=function(){function e(t){return _classCallCheck(this,e),detectorInstance||(detectorInstance=this),this.options={},this.options.targets=["html"],this.init_detection(),this.init_classes(),detectorInstance}return _createClass(e,[{key:"init_detection",value:function(){var e={ie:0,gecko:0,webkit:0,khtml:0,opera:0,version:0},t={ie:0,firefox:0,safari:0,konq:0,opera:0,chrome:0,version:0},n={windows:!1,mac:!1,osx:!1,iphone:!1,ipod:!1,ipad:!1,ios:!1,blackberry:!1,android:!1,opera_mini:!1,windows_mobile:!1,wii:!1,ps:!1},i={touch:!1,media_query:!1},r=navigator.userAgent;if(window.opera)e.version=t.version=window.opera.version(),e.opera=t.opera=parseInt(e.version);else if(/AppleWebKit\/(\S+)/.test(r)||/AppleWebkit\/(\S+)/.test(r))if(e.version=RegExp.$1,e.webkit=parseInt(e.version),/Chrome\/(\S+)/.test(r))t.version=RegExp.$1,t.chrome=parseInt(t.version);else if(/Version\/(\S+)/.test(r))t.version=RegExp.$1,t.safari=parseInt(t.version);else{var o=1;o=e.webkit<100?1:e.webkit<312?1.2:e.webkit<412?1.3:2,t.safari=t.version=o}else/KHTML\/(\S+)/.test(r)||/Konqueror\/([^;]+)/.test(r)?(e.version=t.version=RegExp.$1,e.khtml=t.konq=parseInt(e.version)):/rv:([^\)]+)\) Gecko\/\d{8}/.test(r)?(e.version=RegExp.$1,e.gecko=parseInt(e.version),/Firefox\/(\S+)/.test(r)&&(t.version=RegExp.$1,t.firefox=parseInt(t.version))):/MSIE ([^;]+)/.test(r)?(e.version=t.version=RegExp.$1,e.ie=t.ie=parseInt(e.version)):/Trident.*rv[ :]*(11[\.\d]+)/.test(r)&&(e.version=t.version=RegExp.$1,e.ie=t.ie=parseInt(e.version));t.ie=e.ie,t.opera=e.opera;var s=navigator.platform;if(n.windows=!!r.match(/Win/),n.mac=!!r.match(/Mac/),n.windows&&/Win(?:dows )?([^do]{2})\s?(\d+\.\d+)?/.test(r))if("NT"===RegExp.$1)switch(RegExp.$2){case"5.0":n.windows="2000";break;case"5.1":n.windows="XP";break;case"6.0":n.windows="Vista";break;default:n.windows="NT"}else"9x"===RegExp.$1?n.windows="ME":n.windows=RegExp.$1;n.nokia=!!r.match(/Nokia/i),n.kindle_fire=!!r.match(/Silk/),n.iphone=!!r.match(/iPhone/),n.ipod=!!r.match(/iPod/),n.ipad=!!r.match(/iPad/),n.blackberry=!!r.match(/BlackBerry/)||!!r.match(/BB[0-9]+/)||!!r.match(/PlayBook/),n.android=!!r.match(/Android/),n.opera_mini=!!r.match(/Opera Mini/i),n.windows_mobile=!!r.match(/IEMobile/i),n.ios=n.iphone||n.ipod||n.ipad,n.osx=!n.ios&&!!r.match(/OS X/),n.wii=r.indexOf("Wii")>-1,n.playstation=/playstation/i.test(r),i.touch=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),i.media_query=!(!window.matchMedia&&!window.msMatchMedia),this.user_agent=r,this.plateform=s,this.browser=t,this.engine=e,this.system=n,this.features=i,this.categories=["engine","browser","system","features"]}},{key:"init_classes",value:function(){if(!this.options.targets||0===this.options.targets.length)return!1;for(var e=[],t=null,n=0,i=this.options.targets.length;n<i;n++){if(t=this.options.targets[n],"string"==typeof t)switch(t){case"html":e.push(document.documentElement);break;case"body":e.push(document.body);break;default:for(var r=document.querySelectorAll(t),o=0;o<r.length;o++)e.push(r[o])}else t instanceof Element&&e.push(t);if(e.length){this.classes=[];for(var s in this)if(this.categories.indexOf(s)!==-1)for(var a in this[s]){var c=this[s][a];"version"!==a&&("features"===s?this.classes.push(s+"-"+(c?"":"no-")+a):c&&(this.classes.push(s+"-"+a),"browser"===s&&this.classes.push(s+"-"+a+"-"+c)))}for(var o=0;o<e.length;o++)e[o].classList.add.apply(e[o].classList,this.classes)}}return this}}]),e}(),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),keyboardInstance=null,Keyboard=function(e){function t(e){var n;_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return keyboardInstance||(keyboardInstance=i),i.options={},i.keycode_names={91:"cmd",17:"ctrl",32:"space",16:"shift",18:"alt",20:"caps",9:"tab",13:"enter",8:"backspace",38:"up",39:"right",40:"down",37:"left",27:"esc"},i.downs=[],i.listen_to_events(),n=keyboardInstance,_possibleConstructorReturn(i,n)}return _inherits(t,e),_createClass(t,[{key:"listen_to_events",value:function(){var e=this,t=function(t){var n=e.keycode_to_character(t.keyCode);e.downs.indexOf(n)===-1&&e.downs.push(n),e.trigger("down",[t.keyCode,n])===!1&&(t=t||window.event,t.preventDefault?t.preventDefault():t.returnValue=!1)},n=function(t){var n=e.keycode_to_character(t.character);e.downs.indexOf(n)!==-1&&e.downs.splice(e.downs.indexOf(n),1),e.trigger("up",[t.keyCode,n])};return document.addEventListener?(document.addEventListener("keydown",t,!1),document.addEventListener("keyup",n,!1)):(document.attachEvent("onkeydown",t,!1),document.attachEvent("onkeyup",n,!1)),this}},{key:"keycode_to_character",value:function(e){var t=this.keycode_names[e];return t||(t=String.fromCharCode(e).toLowerCase()),t}},{key:"are_down",value:function(e){for(var t=!0,n=0;n<e.length;n++){var i=e[n];"number"==typeof i&&(i=this.keycode_to_character(i)),this.downs.indexOf(i)===-1&&(t=!1)}return t}},{key:"is_down",value:function(){return this.are_down([input])}}]),t}(EventEmitter),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),mouseInstance=null,Mouse=function(e){function t(e){var n;_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return mouseInstance||(mouseInstance=i),i.options={},i.viewport=new Viewport,i.down=!1,i.position={},i.position.x=0,i.position.y=0,i.position.ratio={},i.position.ratio.x=0,i.position.ratio.y=0,i.wheel={},i.wheel.delta=0,i.listen_to_events(),n=mouseInstance,_possibleConstructorReturn(i,n)}return _inherits(t,e),_createClass(t,[{key:"listen_to_events",value:function(){var e=this,t=function(t){e.down=!0,e.trigger("down",[e.position,t.target])===!1&&t.preventDefault()},n=function(t){e.down=!1,e.trigger("up",[e.position,t.target])},i=function(t){e.position.x=t.clientX,e.position.y=t.clientY,e.position.ratio.x=e.position.x/e.viewport.width,e.position.ratio.y=e.position.y/e.viewport.height,e.trigger("move",[e.position,t.target])},r=function(t){if(e.wheel.delta=t.wheelDeltaY||t.wheelDelta||-t.detail,e.trigger("wheel",[e.wheel])===!1)return t.preventDefault(),!1};return document.addEventListener?(document.addEventListener("mousedown",t,!1),document.addEventListener("mouseup",n,!1),document.addEventListener("mousemove",i,!1),document.addEventListener("mousewheel",r,!1),document.addEventListener("DOMMouseScroll",r,!1)):(document.attachEvent("onmousedown",t,!1),document.attachEvent("onmouseup",n,!1),document.attachEvent("onmousemove",i,!1),document.attachEvent("onmousewheel",r,!1)),this}}]),t}(EventEmitter),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var s=r.get;if(void 0!==s)return s.call(i)},tickerInstance=null,Ticker=function(e){function t(){var e;_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return tickerInstance||(tickerInstance=n),n.reseted=!1,n.running=!1,n.time={},n.time.start=0,n.time.elapsed=0,n.time.delta=0,n.time.current=0,n.waits={},n.waits.before=[],n.waits.after=[],n.intervals={},n.run(),e=tickerInstance,_possibleConstructorReturn(n,e)}return _inherits(t,e),_createClass(t,[{key:"reset",value:function(e,t){return this.reseted=!0,this.time.start=+new Date,this.time.current=this.time.start,this.time.elapsed=0,this.time.delta=0,e&&this.run(),t&&(that.destroy_interval(t),that.create_interval(t)),this}},{key:"run",value:function(){var e=this;if(!this.running){this.running=!0;var t=function t(){e.running&&window.requestAnimationFrame(t),e.tick()};return t(),this}}},{key:"stop",value:function(){return this.running=!1,this}},{key:"tick",value:function(){this.reseted||this.reset(),this.time.current=+new Date,this.time.delta=this.time.current-this.time.start-this.time.elapsed,this.time.elapsed=this.time.current-this.time.start;for(var e=0,t=this.waits.before.length,n=null;e<t;e++)n=this.waits.before[e],0===--n.frames_count&&(n.action.apply(this,[this.time]),this.waits.before.splice(e,1),e--,t--);for(this.trigger("tick",[this.time]),this.trigger_intervals(),e=0,t=this.waits.after.length;e<t;e++)n=this.waits.after[e],0===--n.frames_count&&(n.action.apply(this,[this.time]),this.waits.after.splice(e,1),e--,t--);return this}},{key:"wait",value:function(e,t,n){return"function"==typeof t&&("number"==typeof e&&(this.waits[n?"after":"before"].push({frames_count:e,action:t}),this))}},{key:"create_interval",value:function(e){return this.intervals[e]={interval:e,next_trigger:e,start:this.time.elapsed,last_trigger:this.time.elapsed},this}},{key:"destroy_interval",value:function(e){return delete this.intervals[e],this}},{key:"trigger_intervals",value:function(){for(var e in this.intervals){var t=this.intervals[e];this.time.elapsed-t.last_trigger>t.next_trigger&&(t.next_trigger=t.interval-(this.time.elapsed-t.start)%t.interval,t.last_trigger=this.time.elapsed,this.trigger("tick-"+t.interval,[this.time,t]))}return this}},{key:"on",value:function(e,n){var i=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"on",this).call(this,e,n);var r=this.resolve_names(e);r.forEach(function(e){if(e.match(/^tick([0-9]+)$/)){var t=parseInt(e.replace(/^tick([0-9]+)$/,"$1"));t&&i.create_interval(t)}})}},{key:"off",value:function(e){var n=this;_get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"off",this).call(this,e);var i=this.resolve_names(e);i.forEach(function(e){if(e.match(/^tick([0-9]+)$/)){var t=parseInt(e.replace(/^tick([0-9]+)$/,"$1"));t&&n.destroy_interval(t)}})}}]),t}(EventEmitter),_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),viewportInstance=null,Viewport=function(e){function t(e){var n;_classCallCheck(this,t);var i=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return viewportInstance||(viewportInstance=i),i.options={},i.options.disable_hover_on_scroll=!1,i.options.initial_triggers=["resize","scroll"],i.ticker=new Ticker,i.detector=new Detector,i.top=0,i.left=0,i.y=0,i.x=0,i.scroll={},i.scroll.delta={},i.scroll.delta.top=0,i.scroll.delta.left=0,i.scroll.delta.y=0,i.scroll.delta.x=0,i.scroll.direction={},i.scroll.direction.x=null,i.scroll.direction.y=null,i.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,i.pixel_ratio=window.devicePixelRatio||1,i.init_events(),n=viewportInstance,_possibleConstructorReturn(i,n)}return _inherits(t,e),_createClass(t,[{key:"init_events",value:function(){var e=this,t=function(){e.resize_handler()},n=function(){e.scroll_handler()};return window.addEventListener("resize",t),window.addEventListener("scroll",n),this.options.initial_triggers.length&&this.ticker.wait(1,function(){for(var t=0;t<e.options.initial_triggers.length;t++){var n=e.options.initial_triggers[t],i=e[n+"_handler"];"function"==typeof i&&i.apply(e)}}),this}},{key:"resize_handler",value:function(){return this.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,this.trigger("resize",[this.width,this.height]),this}},{key:"scroll_handler",value:function(){var e="undefined"!=typeof window.pageYOffset?window.pageYOffset:window.document.documentElement.scrollTop,t="undefined"!=typeof window.pageXOffset?window.pageXOffset:window.document.documentElement.scrollLeft;return this.scroll.direction.y=e>this.top?"down":"up",this.scroll.direction.x=t>this.left?"right":"left",this.scroll.delta.top=e-this.top,this.scroll.delta.left=t-this.left,this.top=e,this.left=t,this.y=this.top,this.x=this.left,this.scroll.delta.y=this.scroll.delta.top,this.scroll.delta.x=this.scroll.delta.left,this.trigger("scroll",[this.top,this.left,this.scroll]),this}},{key:"init_disabling_hover_on_scroll",value:function(){var e=null,t=!1;return this.on("scroll",function(){that.options.disable_hover_on_scroll&&(e&&window.clearTimeout(e),t||(t=!0,document.body.style.pointerEvents="none"),e=window.setTimeout(function(){t=!1,document.body.style.pointerEvents="auto"},60))}),this}},{key:"match_media",value:function(e){return!(!this.detector.features.media_query||"string"!=typeof e||""===e)&&!!window.matchMedia(e).matches}}]),t}(EventEmitter),Pan={};Pan.enableMouse=function(){Pan.mouse=new Mouse},Pan.enableKeyboard=function(){Pan.keyboard=new Keyboard},Pan.enableViewport=function(){Pan.viewport=new Viewport},Pan.enableTicker=function(){Pan.ticker=new Ticker},Pan.enableTools=function(){Pan.viewport=new Viewport,Pan.keyboard=new Keyboard,Pan.mouse=new Mouse,Pan.ticker=new Ticker};